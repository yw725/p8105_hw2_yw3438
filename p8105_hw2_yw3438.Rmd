---
title: "p8105_hw2_yw3438"
author: "Yuning Wang"
date: "9/24/2019"
output: github_document
---

```{r setup, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(dplyr)
library(readxl)
```

## Problem 1
```{r message=FALSE}
# Import the data in Mr. Trash Wheel sheet
mr_trash_wheel = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                            sheet = "Mr. Trash Wheel",
                            range = "A2:N338" ) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(sports_balls))

# Import the data in precipitation data for 2018
pcptt_2018 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2018 Precipitation",
                        skip = 1) %>%
  janitor::clean_names() %>%
  mutate(year = "2018")

# Import the data in precipitation data for 2017
pcptt_2017 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2017 Precipitation",
                        skip = 1) %>%
  janitor::clean_names() %>%
  mutate(year = "2017")

# Combine precipitation datasets
pcptt_1718 = full_join(pcptt_2017, pcptt_2018) %>%
  mutate(month = month.name[month])
```

After reading and cleaning the data in Mr. Trash Wheel sheet, there are 285 obs. of 14 variables. The variables contains in data "mr_trash_wheel" include dumpster, month, year, sports_balls, etc., among which all the numbers in sports_balls have been transformed into integers.

After reading and cleaning the data in 2018 Precipitation, there are 13 obs. of 3 variables including month, year and total. After read and clean the data in 2017 Precipitation, there are 13 obs. of 3 variables including month, year and total.

After combing the datasets of 2018 Precipitation and 2017 Precipitation, the new datasets include 26 obs. of 3 variables including month, year and total.

The total precipitation in 2018 is 23.50 and the median number of sports_balls in 2017 is `r median(pull(subset(mr_trash_wheel, year == "2017"), sports_balls))`


## Problem 2
```{r}
# Read the data in pol-month
pol_month = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(month = month.name[as.numeric(month)]) %>%
  pivot_longer(cols = starts_with("prez"),
               names_to = "president",
               names_prefix = "prez_") %>%
  select(-day)

# Read the data in snp.csv
snp = read_csv("./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("day", "month", "year"), sep = "/") %>%
  mutate(month = month.name[as.numeric(month)]) %>%
  arrange(year, month)

# Read and tidy unemployment data
unemployment = read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  pivot_longer(jan:dec,
               names_to = "month") %>%
  mutate(month = month.name[factor(month)]) %>%
  mutate(year = as.character(year))
```
