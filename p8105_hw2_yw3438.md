p8105\_hw2\_yw3438
================
Yuning Wang
9/24/2019

``` r
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(dplyr)
library(readxl)
library(ggridges)
```

## Problem 1

``` r
# Import the data in Mr. Trash Wheel sheet
mr_trash_wheel = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                            sheet = "Mr. Trash Wheel",
                            range = "A2:N338" ) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(round(sports_balls)))

# Import the data in precipitation data for 2018
pcptt_2018 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2018 Precipitation",
                        skip = 1) %>%
  janitor::clean_names() %>%
  mutate(year = "2018") %>%
  drop_na(total)

# Import the data in precipitation data for 2017
pcptt_2017 = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                        sheet = "2017 Precipitation",
                        skip = 1) %>%
  janitor::clean_names() %>%
  mutate(year = "2017") %>%
  drop_na(total)

# Combine precipitation datasets
pcptt_1718 = full_join(pcptt_2017, pcptt_2018) %>%
  mutate(month = month.name[month])
```

**After reading and cleaning the data in Mr. Trash Wheel sheet, there
are 285 obs. of 14 variables. The variables contains in data
“mr\_trash\_wheel” include “dumpster”, “month”, “year”,
“sports\_balls”, etc., among which all the numbers in
“sports\_balls” have been transformed into integers.**

**After reading and cleaning the data in 2018 Precipitation, there are 8
obs. of 3 variables including “month”, “year” and “total”. After reading
and cleaning the data in 2017 Precipitation, there are 13 obs. of 3
variables including “month”, “year” and “total”.**

**After combing the datasets of 2018 Precipitation and 2017
Precipitation, the new datasets include 21 obs. of 3 variables including
“month”, “year” and “total”.**

**The total precipitation in 2018 is 23.5 and the median number of
sports\_balls in 2017 is 8**

## Problem 2

``` r
# Read the data in pol-month
pol_month = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(month = month.name[as.numeric(month)]) %>%
  pivot_longer(cols = starts_with("prez"),
               names_to = "president",
               names_prefix = "prez_") %>%
  select(-day) %>%
  filter(value == 1) %>%
  select(-value)

# Read the data in snp.csv
snp = read_csv("./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(month = month.name[as.numeric(month)]) %>%
  arrange(year, month)

# Read and tidy unemployment data
unemployment = read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  pivot_longer(jan:dec,
               names_to = "month") %>%
  mutate(month = month.name[factor(month)]) %>%
  mutate(year = as.character(year))
  
# Merging snp into pol_month
  snp_pol = left_join(pol_month, snp, by = c("month", "year"))
# Merging unemployment data into one dataset
  snp_pol_unempl = left_join(snp_pol, unemployment, 
                             by = c("month", "year"))
```

**The pol\_month dataset contains 817 rows and 9 colomns. The range of
years in pol\_month dataset is from 1947 to 2015. The names of key
variables in pol\_month are “year, month, gov\_gop, sen\_gop, rep\_gop,
gov\_dem, sen\_dem, rep\_dem, president”.**

**The snp dataset contains 787 rows and 4 colomns. The range of years in
pol\_month dataset is from 1950 to 2015. The names of key variables in
pol\_month are “month, day, year, close”.**

**The unemployment dataset contains 816 rows and 3 colomns. The range of
years in pol\_month dataset is from 1948 to 2015. The names of key
variables in pol\_month are “year, month, value”.**

**After merging snp and pol\_month, the new dataset, snp\_pol, contains
817 rows and 11 colomns. The range of years in pol\_month dataset is
from 1947 to 2015. The names of key variables in pol\_month are “year,
month, gov\_gop, sen\_gop, rep\_gop, gov\_dem, sen\_dem, rep\_dem,
president, day, close”.**

**After merging snp\_pol and unemployment, the new dataset,
snp\_pol\_unempl, contains 817 rows and 12 colomns. The range of years
in pol\_month dataset is from 1947 to 2015. The names of key variables
in pol\_month are “year, month, gov\_gop, sen\_gop, rep\_gop, gov\_dem,
sen\_dem, rep\_dem, president, day, close, value”.**

## Problem 3

``` r
baby_names = read_csv("./data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(ethnicity = recode(ethnicity, 
                            "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER",
                            "BLACK NON HISP" = "BLACK NON HISPANIC",
                            "WHITE NON HISP" = "WHITE NON HISPANIC"),
         childs_first_name = str_to_lower(childs_first_name),
         ethnicity = str_to_lower(ethnicity)) %>%
  distinct()

# Make the table about "olivia"
olivia_rank = baby_names %>%
  filter(gender == "FEMALE" & childs_first_name == "olivia") %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank",
    id_cols = ethnicity
    )

# Figure out the most popular name among male children over time
boy_name = baby_names %>%
  filter(gender == "MALE") %>%
  group_by(childs_first_name) %>%
  summarise(count = sum(count)) %>%
  filter(count == max(count))
# Make the table showing the rank in popularity among male baby over time
ethan_rank = baby_names %>%
  filter(gender == "MALE" & 
           childs_first_name == pull(boy_name, childs_first_name)) %>%
  pivot_wider(
    names_from = "year_of_birth",
    values_from = "rank",
    id_cols = ethnicity
    )

# Draw a scatter plot
m_wnh_2016 = baby_names %>%
  filter(gender == "MALE",
         ethnicity == "white non hispanic",
         year_of_birth == 2016) %>%
  ggplot(aes(x = rank, y = count)) +
  geom_point() +
  xlab("Rank in Popularity") +
  ylab("Number of Children") 
m_wnh_2016
```

![](p8105_hw2_yw3438_files/figure-gfm/unnamed-chunk-3-1.png)<!-- -->
